<!-- 
  VISTA DE SOLICITUD DE RECUPERACIÓN DE CONTRASEÑA.
  Esta plantilla define el formulario donde el propietario del bar introduce
  su correo electrónico para recibir el token de seguridad.
-->

<div class="forgot-container">
  
  <!-- Fondo decorativo con imagen local (definida en el CSS) -->
  <div class="background-overlay"></div>

  <div class="card">
    
    <!-- CABECERA RESALTADA ESTILO SPOTIFY -->
    <header class="card-header">
      <div class="icon-circle">
        <!-- Icono Interrogación/Candado -->
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></svg>
      </div>
      <h2>Recuperar Cuenta</h2>
      <p class="subtitle">Te enviaremos un enlace para restaurar tu acceso</p>
    </header>

    <div class="form-content">
      
       <!-- GRUPO DE ENTRADA: EMAIL -->
      <div class="input-group">
        <label for="email">Email</label>
        <div class="input-wrapper">
          <!-- Icono Email -->
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
          <!-- Vinculación bidireccional con el atributo 'email' del componente -->
          <input
            id="email"
            type="email"
            [(ngModel)]="email"
            placeholder="tuemail@ejemplo.com"
          />
        </div>
      </div>

      <!-- BOTÓN DE ACCIÓN: Envío de enlace -->
      <!-- Se deshabilita mientras la petición está en curso para evitar duplicados -->
      <button
        class="btn-primary"
        type="button"
        (click)="sendResetLink()"
        [disabled]="loading"
      >
        <!-- Texto condicional: muestra el mensaje o el spinner de carga -->
        <span *ngIf="!loading">Enviar enlace</span>
        <span *ngIf="loading" class="spinner"></span>
      </button>

      <!-- CONTENEDOR DE MENSAJES DE RETROALIMENTACIÓN -->
      <div class="message-container">
        <p *ngIf="msg" class="msg success">{{ msg }}</p>
        <p *ngIf="err" class="msg error">{{ err }}</p>
      </div>

      <!-- NAVEGACIÓN: Enlace de retorno seguro al login -->
      <div class="back-link">
        <a routerLink="/login">Volver al Login</a>
      </div>

    </div>
  </div>
</div>